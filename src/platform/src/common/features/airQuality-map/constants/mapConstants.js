import Node from '@/images/map/Node.webp';
import Emoji from '@/images/map/Emoji.webp';
import Heatmap from '@/images/map/Heatmap.webp';
import Node_Number from '@/images/map/Node_number.webp';

import DarkMode from '@/images/map/dark.webp';
import LightMode from '@/images/map/light.webp';
import SatelliteMode from '@/images/map/satellite.webp';
import StreetsMode from '@/images/map/street.webp';

// Import icon components
import {
  AqGood,
  AqModerate,
  AqUnhealthyForSensitiveGroups,
  AqVeryUnhealthy,
  AqUnhealthy,
  AqHazardous,
  AqNoValue,
} from '@airqo/icons-react';

export const BOUNDARY_URL = 'https://nominatim.openstreetmap.org/search';

export const mapStyles = [
  {
    url: 'mapbox://styles/mapbox/streets-v12',
    name: 'Streets',
    image: StreetsMode,
  },
  {
    url: 'mapbox://styles/mapbox/light-v11',
    name: 'Light',
    image: LightMode,
  },
  {
    url: 'mapbox://styles/mapbox/dark-v11',
    name: 'Dark',
    image: DarkMode,
  },
  {
    url: 'mapbox://styles/mapbox/satellite-v9',
    name: 'Satellite',
    image: SatelliteMode,
  },
];

export const mapDetails = [
  {
    name: 'Emoji',
    image: Emoji,
  },
  {
    name: 'Node',
    image: Node,
  },
  {
    name: 'Heatmap',
    image: Heatmap,
  },
  {
    name: 'Number',
    image: Node_Number,
  },
];

export const MAP_CONFIG = {
  PROJECTION: 'mercator',
  PERFORMANCE: {
    ANTIALIAS: false,
    OPTIMIZE_FOR_TERRAIN: false,
    RENDER_WORLD_COPIES: false,
    REFRESH_EXPIRED_TILES: false,
    MAX_TILE_CACHE_SIZE: 50,
  },
  TIMEOUTS: {
    DATA_FETCH_DELAY: 100,
    CONTROL_CHECK_INTERVAL: 2000,
    ZOOM_DEBOUNCE: 100,
    STYLE_LOAD_FALLBACK: 500,
    IDLE_CALLBACK_TIMEOUT: 1000,
  },
  BREAKPOINTS: {
    DESKTOP_MIN_WIDTH: 1024,
  },
};

export const TOAST_CONFIG = {
  TIMEOUT: 3000,
  POSITION: 'bottom',
};

export const LAYOUT_CONFIG = {
  MOBILE: {
    MAP_HEIGHT: '40%',
    SIDEBAR_HEIGHT: '60%',
  },
  DESKTOP: {
    SIDEBAR_MIN_WIDTH: '380px',
    SIDEBAR_LG_WIDTH: '470px',
  },
};

// -------------------------------------------------------------------
// Icon Images: Robust production-ready approach
// -------------------------------------------------------------------

// Air quality category to icon component mapping
export const airQualityIcons = {
  GoodAir: AqGood,
  ModerateAir: AqModerate,
  UnhealthyForSensitiveGroups: AqUnhealthyForSensitiveGroups,
  Unhealthy: AqUnhealthy,
  VeryUnhealthy: AqVeryUnhealthy,
  Hazardous: AqHazardous,
  Invalid: AqNoValue,
  undefined: AqNoValue,
};

// Function to get specific icon component
export const getAirQualityIcon = (category) => {
  return airQualityIcons[category] || airQualityIcons.Invalid;
};

// Better approach: Pre-built SVG strings for each category
const iconSVGs = {
  GoodAir: `<svg width="161" height="161" viewBox="0 0 161 161" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="80.5" cy="80.7053" r="80" fill="#8FE6A4"/>
<circle cx="63.8348" cy="64.147" r="8.53333" transform="rotate(180 63.8348 64.147)" fill="#34C759"/>
<circle cx="97.3026" cy="64.147" r="8.53333" transform="rotate(180 97.3026 64.147)" fill="#34C759"/>
<path d="M52.7663 84.1116C52.7663 87.7806 53.489 91.4138 54.8931 94.8036C56.2972 98.1934 58.3552 101.273 60.9497 103.868C63.5441 106.462 66.6241 108.52 70.0139 109.924C73.4037 111.328 77.0368 112.051 80.7059 112.051C84.375 112.051 88.0082 111.328 91.3979 109.924C94.7877 108.52 97.8678 106.462 100.462 103.868C103.057 101.273 105.115 98.1934 106.519 94.8036C107.923 91.4138 108.646 87.7806 108.646 84.1116L80.7059 84.1116H52.7663Z" fill="#34C759"/>
<path d="M91.9757 20.9362C106.991 23.7299 120.415 32.0456 129.603 44.2448C138.792 56.4441 143.079 71.6423 141.619 86.845C140.159 102.048 133.058 116.152 121.716 126.38C110.374 136.608 95.6124 142.217 80.3402 142.102C65.068 141.987 50.3926 136.157 39.2053 125.76C28.0181 115.363 21.1303 101.153 19.8991 85.9302C18.6678 70.7073 23.1824 55.5752 32.5533 43.5154C41.9243 31.4557 55.472 23.3427 70.5272 20.775L72.5816 32.8209C60.5375 34.8751 49.6993 41.3654 42.2026 51.0133C34.7058 60.6611 31.0941 72.7667 32.0791 84.945C33.0641 97.1234 38.5743 108.491 47.5241 116.809C56.4739 125.126 68.2143 129.791 80.432 129.882C92.6498 129.974 104.459 125.487 113.533 117.305C122.607 109.123 128.287 97.839 129.455 85.6769C130.623 73.5147 127.194 61.3562 119.843 51.5968C112.492 41.8374 101.752 35.1848 89.7404 32.9499L91.9757 20.9362Z" fill="white"/>
<path d="M91.9684 20.9349C101.914 22.7841 111.245 27.0738 119.123 33.419C127.002 39.7642 133.182 47.9664 137.108 57.2893L125.847 62.0323C122.705 54.574 117.761 48.0123 111.459 42.9361C105.156 37.86 97.6911 34.4282 89.7346 32.9488L91.9684 20.9349Z" fill="#34C759"/>
</svg>
`,
  ModerateAir: `<svg width="161" height="161" viewBox="0 0 161 161" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="80.5" cy="80.7053" r="80" fill="#FFD633"/>
<circle cx="63.8348" cy="64.147" r="8.53333" transform="rotate(180 63.8348 64.147)" fill="#ECAA06"/>
<circle cx="97.3036" cy="64.147" r="8.53333" transform="rotate(180 97.3036 64.147)" fill="#ECAA06"/>
<path d="M52.7663 84.1116C52.7663 87.7807 53.489 91.4139 54.8931 94.8036C56.2972 98.1934 58.3552 101.273 60.9497 103.868C63.5441 106.462 66.6241 108.52 70.0139 109.924C73.4037 111.329 77.0368 112.051 80.7059 112.051C84.375 112.051 88.0082 111.329 91.3979 109.924C94.7877 108.52 97.8678 106.462 100.462 103.868C103.057 101.273 105.115 98.1934 106.519 94.8036C107.923 91.4139 108.646 87.7807 108.646 84.1116H97.4697C97.4697 86.3131 97.0361 88.493 96.1936 90.5268C95.3512 92.5607 94.1163 94.4087 92.5597 95.9654C91.003 97.522 89.155 98.7569 87.1211 99.5993C85.0873 100.442 82.9074 100.875 80.7059 100.875C78.5045 100.875 76.3246 100.442 74.2907 99.5993C72.2568 98.7569 70.4088 97.522 68.8522 95.9654C67.2955 94.4087 66.0607 92.5607 65.2182 90.5268C64.3758 88.493 63.9422 86.3131 63.9422 84.1116H52.7663Z" fill="#ECAA06"/>
<path d="M91.9757 20.9362C106.991 23.7299 120.415 32.0456 129.603 44.2448C138.792 56.4441 143.079 71.6423 141.619 86.845C140.159 102.048 133.058 116.152 121.716 126.38C110.374 136.608 95.6124 142.217 80.3402 142.102C65.068 141.987 50.3926 136.157 39.2053 125.76C28.0181 115.363 21.1303 101.153 19.8991 85.9302C18.6678 70.7073 23.1824 55.5752 32.5533 43.5154C41.9243 31.4557 55.472 23.3427 70.5272 20.775L72.5816 32.8209C60.5375 34.8751 49.6993 41.3654 42.2026 51.0133C34.7058 60.6611 31.0941 72.7667 32.0791 84.945C33.0641 97.1234 38.5743 108.491 47.5241 116.809C56.4739 125.126 68.2143 129.791 80.432 129.882C92.6498 129.974 104.459 125.487 113.533 117.305C122.607 109.123 128.287 97.839 129.455 85.6769C130.623 73.5147 127.194 61.3562 119.843 51.5968C112.492 41.8374 101.752 35.1848 89.7404 32.9499L91.9757 20.9362Z" fill="white"/>
<path d="M91.9684 20.9349C101.914 22.7841 111.245 27.0738 119.123 33.419C127.002 39.7642 133.182 47.9664 137.108 57.2893C141.035 66.6122 142.585 76.7642 141.62 86.8341C140.655 96.9039 137.204 106.577 131.578 114.984L121.423 108.188C125.923 101.462 128.684 93.7241 129.456 85.6682C130.228 77.6123 128.988 69.4907 125.847 62.0323C122.705 54.574 117.761 48.0123 111.459 42.9361C105.156 37.86 97.6911 34.4282 89.7346 32.9488L91.9684 20.9349Z" fill="#ECAA06"/>
</svg>`,
  UnhealthyForSensitiveGroups: `<svg width="161" height="161" viewBox="0 0 161 161" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="80.5" cy="80.7053" r="80" fill="#FFC170"/>
<circle cx="63.4332" cy="63.6387" r="9.6" transform="rotate(180 63.4332 63.6387)" fill="#FF851F"/>
<rect x="57.0332" y="89.2387" width="46.9333" height="12.8" fill="#FF851F"/>
<circle cx="96.901" cy="63.6387" r="9.6" transform="rotate(180 96.901 63.6387)" fill="#FF851F"/>
<path d="M91.9757 20.9362C106.991 23.7299 120.415 32.0456 129.603 44.2448C138.792 56.4441 143.079 71.6423 141.619 86.845C140.159 102.048 133.058 116.152 121.716 126.38C110.374 136.608 95.6124 142.217 80.3402 142.102C65.068 141.987 50.3926 136.157 39.2053 125.76C28.0181 115.363 21.1303 101.153 19.8991 85.9302C18.6678 70.7073 23.1824 55.5752 32.5533 43.5154C41.9243 31.4557 55.472 23.3427 70.5272 20.775L72.5816 32.8209C60.5375 34.8751 49.6993 41.3654 42.2026 51.0133C34.7058 60.6611 31.0941 72.7667 32.0791 84.945C33.0641 97.1234 38.5743 108.491 47.5241 116.809C56.4739 125.126 68.2143 129.791 80.432 129.882C92.6498 129.974 104.459 125.487 113.533 117.305C122.607 109.123 128.287 97.839 129.455 85.6769C130.623 73.5147 127.194 61.3562 119.843 51.5968C112.492 41.8374 101.752 35.1848 89.7404 32.9499L91.9757 20.9362Z" fill="white"/>
<path d="M91.9684 20.9349C106.983 23.7266 120.408 32.0401 129.598 44.2375C138.788 56.4349 143.077 71.6318 141.62 86.8341C140.163 102.036 133.065 116.142 121.725 126.372C110.386 136.601 95.6263 142.213 80.3547 142.102L80.4436 129.883C92.6609 129.971 104.469 125.482 113.54 117.298C122.612 109.114 128.29 97.83 129.456 85.6682C130.621 73.5063 127.19 61.3488 119.838 51.5909C112.486 41.833 101.746 35.1822 89.7346 32.9488L91.9684 20.9349Z" fill="#FF851F"/>
</svg>
`,
  Unhealthy: `<svg width="161" height="161" viewBox="0 0 161 161" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="80.5" cy="80.7053" r="80" fill="#FFA6A1"/>
<rect x="58.0996" y="89.2386" width="44.8" height="12.8" fill="#F7453C"/>
<path d="M52.7663 62.572C52.7663 63.9727 53.0422 65.3598 53.5782 66.6539C54.1143 67.9481 54.9 69.124 55.8905 70.1145C56.881 71.1049 58.0568 71.8906 59.351 72.4267C60.6451 72.9627 62.0322 73.2386 63.4329 73.2386C64.8337 73.2386 66.2208 72.9627 67.5149 72.4267C68.809 71.8906 69.9849 71.1049 70.9754 70.1145C71.9659 69.124 72.7516 67.9481 73.2877 66.6539C73.8237 65.3598 74.0996 63.9727 74.0996 62.572L63.4329 62.572H52.7663Z" fill="#F7453C"/>
<path d="M86.235 62.572C86.235 63.9727 86.5109 65.3598 87.047 66.6539C87.583 67.9481 88.3687 69.124 89.3592 70.1145C90.3497 71.1049 91.5256 71.8906 92.8197 72.4267C94.1139 72.9627 95.5009 73.2386 96.9017 73.2386C98.3025 73.2386 99.6895 72.9627 100.984 72.4267C102.278 71.8906 103.454 71.1049 104.444 70.1145C105.435 69.124 106.22 67.9481 106.756 66.6539C107.292 65.3598 107.568 63.9727 107.568 62.572L96.9017 62.572H86.235Z" fill="#F7453C"/>
<path d="M91.9757 20.9362C106.991 23.7299 120.415 32.0456 129.603 44.2448C138.792 56.4441 143.079 71.6423 141.619 86.845C140.159 102.048 133.058 116.152 121.716 126.38C110.374 136.608 95.6124 142.217 80.3402 142.102C65.068 141.987 50.3926 136.157 39.2053 125.76C28.0181 115.363 21.1303 101.153 19.8991 85.9302C18.6678 70.7073 23.1824 55.5752 32.5533 43.5154C41.9243 31.4557 55.472 23.3427 70.5272 20.775L72.5816 32.8209C60.5375 34.8751 49.6993 41.3654 42.2026 51.0133C34.7058 60.6611 31.0941 72.7667 32.0791 84.945C33.0641 97.1234 38.5743 108.491 47.5241 116.809C56.4739 125.126 68.2143 129.791 80.432 129.882C92.6498 129.974 104.459 125.487 113.533 117.305C122.607 109.123 128.287 97.839 129.455 85.6769C130.623 73.5147 127.194 61.3562 119.843 51.5968C112.492 41.8374 101.752 35.1848 89.7404 32.9499L91.9757 20.9362Z" fill="white"/>
<path d="M91.9684 20.9349C101.914 22.7841 111.245 27.0738 119.123 33.419C127.002 39.7642 133.182 47.9664 137.108 57.2893C141.035 66.6122 142.585 76.7642 141.62 86.8341C140.655 96.9039 137.204 106.577 131.578 114.984C125.952 123.391 118.327 130.27 109.387 135.003C100.446 139.736 90.4705 142.176 80.3547 142.102C70.2389 142.028 60.2997 139.444 51.4291 134.582C42.5585 129.719 35.0341 122.73 29.5312 114.241L39.7848 107.594C44.1872 114.385 50.2067 119.976 57.3032 123.866C64.3997 127.756 72.351 129.824 80.4436 129.883C88.5363 129.941 96.5169 127.99 103.669 124.204C110.822 120.417 116.922 114.914 121.423 108.188C125.923 101.462 128.684 93.7241 129.456 85.6682C130.228 77.6123 128.988 69.4907 125.847 62.0323C122.705 54.574 117.761 48.0123 111.459 42.9361C105.156 37.86 97.6911 34.4282 89.7346 32.9488L91.9684 20.9349Z" fill="#F7453C"/>
</svg>
`,
  VeryUnhealthy: `<svg width="161" height="161" viewBox="0 0 161 161" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="80.5" cy="80.7053" r="80" fill="#DBB6F1"/>
<circle cx="63.8348" cy="64.1471" r="8.53333" transform="rotate(180 63.8348 64.1471)" fill="#AC5CD9"/>
<circle cx="97.3026" cy="64.1471" r="8.53333" transform="rotate(180 97.3026 64.1471)" fill="#AC5CD9"/>
<path d="M106.099 106.718C106.099 103.356 105.437 100.027 104.151 96.9212C102.864 93.8153 100.979 90.9931 98.6014 88.616C96.2242 86.2388 93.402 84.3531 90.2961 83.0666C87.1902 81.7801 83.8613 81.1179 80.4994 81.1179C77.1376 81.1179 73.8087 81.7801 70.7027 83.0666C67.5968 84.3531 64.7747 86.2388 62.3975 88.616C60.0203 90.9931 58.1346 93.8153 56.8481 96.9212C55.5616 100.027 54.8994 103.356 54.8994 106.718L65.1394 106.718C65.1394 104.701 65.5367 102.703 66.3086 100.84C67.0805 98.9763 68.2119 97.283 69.6383 95.8567C71.0646 94.4304 72.7578 93.299 74.6214 92.5271C76.485 91.7552 78.4823 91.3579 80.4994 91.3579C82.5165 91.3579 84.5139 91.7552 86.3774 92.5271C88.241 93.299 89.9343 94.4304 91.3606 95.8567C92.7869 97.283 93.9183 98.9763 94.6902 100.84C95.4621 102.703 95.8594 104.701 95.8594 106.718L106.099 106.718Z" fill="#AC5CD9"/>
<path d="M91.9757 20.9362C106.991 23.7299 120.415 32.0456 129.603 44.2448C138.792 56.4441 143.079 71.6423 141.619 86.845C140.159 102.048 133.058 116.152 121.716 126.38C110.374 136.608 95.6124 142.217 80.3402 142.102C65.068 141.987 50.3926 136.157 39.2053 125.76C28.0181 115.363 21.1303 101.153 19.8991 85.9302C18.6678 70.7073 23.1824 55.5752 32.5533 43.5154C41.9243 31.4557 55.472 23.3427 70.5272 20.775L72.5816 32.8209C60.5375 34.8751 49.6993 41.3654 42.2026 51.0133C34.7058 60.6611 31.0941 72.7667 32.0791 84.945C33.0641 97.1234 38.5743 108.491 47.5241 116.809C56.4739 125.126 68.2143 129.791 80.432 129.882C92.6498 129.974 104.459 125.487 113.533 117.305C122.607 109.123 128.287 97.839 129.455 85.6769C130.623 73.5147 127.194 61.3562 119.843 51.5968C112.492 41.8374 101.752 35.1848 89.7404 32.9499L91.9757 20.9362Z" fill="white"/>
<path d="M91.9684 20.9349C104.436 23.2531 115.874 29.3934 124.695 38.5043C133.516 47.6153 139.284 59.2453 141.198 71.7816C143.113 84.3179 141.079 97.1392 135.379 108.468C129.678 119.796 120.595 129.07 109.387 135.003C98.1788 140.937 85.4024 143.236 72.8291 141.582C60.2559 139.927 48.5089 134.402 39.2173 125.771C29.9256 117.14 23.5498 105.832 20.9739 93.415C18.398 80.9978 19.7497 68.0867 24.8416 56.4722L36.0331 61.3787C31.9596 70.6703 30.8783 80.9991 32.939 90.9329C34.9997 100.867 40.1004 109.913 47.5337 116.818C54.967 123.722 64.3646 128.143 74.4232 129.466C84.4818 130.79 94.7029 128.95 103.669 124.204C112.636 119.457 119.903 112.038 124.463 102.975C129.023 93.9123 130.65 83.6552 129.119 73.6262C127.587 63.5971 122.973 54.2931 115.916 47.0044C108.859 39.7156 99.7089 34.8034 89.7346 32.9488L91.9684 20.9349Z" fill="#AC5CD9"/>
</svg>
`,
  Hazardous: `<svg width="161" height="161" viewBox="0 0 161 161" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="80.5" cy="80.7053" r="80" fill="#F0B1D8"/>
<path d="M52.7663 61.5054C52.7663 62.9062 53.0422 64.2932 53.5782 65.5873C54.1143 66.8815 54.9 68.0574 55.8905 69.0479C56.881 70.0384 58.0568 70.8241 59.351 71.3601C60.6451 71.8962 62.0322 72.1721 63.4329 72.1721C64.8337 72.1721 66.2208 71.8962 67.5149 71.3601C68.809 70.8241 69.9849 70.0384 70.9754 69.0479C71.9659 68.0574 72.7516 66.8815 73.2877 65.5873C73.8237 64.2932 74.0996 62.9062 74.0996 61.5054L63.4329 61.5054H52.7663Z" fill="#D95BA3"/>
<path d="M86.235 62.0137C86.235 63.4145 86.5109 64.8015 87.047 66.0957C87.583 67.3898 88.3687 68.5657 89.3592 69.5562C90.3497 70.5467 91.5256 71.3324 92.8197 71.8684C94.1139 72.4045 95.5009 72.6804 96.9017 72.6804C98.3025 72.6804 99.6895 72.4045 100.984 71.8684C102.278 71.3324 103.454 70.5467 104.444 69.5562C105.435 68.5657 106.22 67.3898 106.756 66.0957C107.292 64.8015 107.568 63.4145 107.568 62.0137L96.9017 62.0137H86.235Z" fill="#D95BA3"/>
<path d="M106.1 106.718C106.1 103.356 105.438 100.027 104.152 96.9212C102.865 93.8153 100.98 90.9931 98.6023 88.616C96.2251 86.2388 93.403 84.3531 90.2971 83.0666C87.1912 81.7801 83.8622 81.1179 80.5004 81.1179C77.1386 81.1179 73.8096 81.7801 70.7037 83.0666C67.5978 84.3531 64.7756 86.2388 62.3985 88.616C60.0213 90.9931 58.1356 93.8153 56.8491 96.9212C55.5626 100.027 54.9004 103.356 54.9004 106.718L65.1404 106.718C65.1404 104.701 65.5377 102.703 66.3096 100.84C67.0815 98.9763 68.2129 97.283 69.6392 95.8567C71.0655 94.4304 72.7588 93.299 74.6224 92.5271C76.4859 91.7552 78.4833 91.3579 80.5004 91.3579C82.5175 91.3579 84.5148 91.7552 86.3784 92.5271C88.242 93.299 89.9352 94.4304 91.3616 95.8567C92.7879 97.283 93.9193 98.9763 94.6912 100.84C95.4631 102.703 95.8604 104.701 95.8604 106.718L106.1 106.718Z" fill="#D95BA3"/>
<path d="M91.9757 20.9362C106.991 23.7299 120.415 32.0456 129.603 44.2448C138.792 56.4441 143.079 71.6423 141.619 86.845C140.159 102.048 133.058 116.152 121.716 126.38C110.374 136.608 95.6124 142.217 80.3402 142.102C65.068 141.987 50.3926 136.157 39.2053 125.76C28.0181 115.363 21.1303 101.153 19.8991 85.9302C18.6678 70.7073 23.1824 55.5752 32.5533 43.5154C41.9243 31.4557 55.472 23.3427 70.5272 20.775L72.5816 32.8209C60.5375 34.8751 49.6993 41.3654 42.2026 51.0133C34.7058 60.6611 31.0941 72.7667 32.0791 84.945C33.0641 97.1234 38.5743 108.491 47.5241 116.809C56.4739 125.126 68.2143 129.791 80.432 129.882C92.6498 129.974 104.459 125.487 113.533 117.305C122.607 109.123 128.287 97.839 129.455 85.6769C130.623 73.5147 127.194 61.3562 119.843 51.5968C112.492 41.8374 101.752 35.1848 89.7404 32.9499L91.9757 20.9362Z" fill="white"/>
<path d="M91.9684 20.9349C106.983 23.7266 120.408 32.0401 129.598 44.2375C138.788 56.4349 143.077 71.6318 141.62 86.8341C140.163 102.036 133.065 116.142 121.725 126.372C110.386 136.601 95.6263 142.213 80.3547 142.102C65.0831 141.991 50.4068 136.165 39.2173 125.771C28.0277 115.377 21.1362 101.17 19.9005 85.9482C18.6648 70.7263 23.1745 55.5935 32.5412 43.5311C41.9078 31.4688 55.4522 23.3516 70.5059 20.7787L72.5646 32.8238C60.5216 34.8822 49.6861 41.3759 42.1928 51.0258C34.6995 60.6757 31.0917 72.7819 32.0803 84.9595C33.0688 97.137 38.582 108.503 47.5337 116.818C56.4853 125.133 68.2264 129.794 80.4436 129.883C92.6609 129.971 104.469 125.482 113.54 117.298C122.612 109.114 128.29 97.83 129.456 85.6682C130.621 73.5063 127.19 61.3488 119.838 51.5909C112.486 41.833 101.746 35.1822 89.7346 32.9488L91.9684 20.9349Z" fill="#D95BA3"/>
</svg>
`,
  Invalid: `<svg width="161" height="161" viewBox="0 0 161 161" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="80.5" cy="80.7053" r="80" fill="#E1E7EC"/>
<circle cx="63.4332" cy="65.772" r="9.6" transform="rotate(180 63.4332 65.772)" fill="#C6D1DB"/>
<rect x="67.6992" y="91.372" width="25.6" height="12.8" fill="#C6D1DB"/>
<circle cx="96.901" cy="65.772" r="9.6" transform="rotate(180 96.901 65.772)" fill="#C6D1DB"/>
<path d="M91.9757 20.9362C106.991 23.7299 120.415 32.0456 129.603 44.2448C138.792 56.4441 143.079 71.6423 141.619 86.845C140.159 102.048 133.058 116.152 121.716 126.38C110.374 136.608 95.6124 142.217 80.3402 142.102C65.068 141.987 50.3926 136.157 39.2053 125.76C28.0181 115.363 21.1303 101.153 19.8991 85.9302C18.6678 70.7073 23.1824 55.5752 32.5533 43.5154C41.9243 31.4557 55.472 23.3427 70.5272 20.775L72.5816 32.8209C60.5375 34.8751 49.6993 41.3654 42.2026 51.0133C34.7058 60.6611 31.0941 72.7667 32.0791 84.945C33.0641 97.1234 38.5743 108.491 47.5241 116.809C56.4739 125.126 68.2143 129.791 80.432 129.882C92.6498 129.974 104.459 125.487 113.533 117.305C122.607 109.123 128.287 97.839 129.455 85.6769C130.623 73.5147 127.194 61.3562 119.843 51.5968C112.492 41.8374 101.752 35.1848 89.7404 32.9499L91.9757 20.9362Z" fill="white"/>
</svg>
`,
  undefined: `<svg width="161" height="161" viewBox="0 0 161 161" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="80.5" cy="80.7053" r="80" fill="#E1E7EC"/>
<circle cx="63.4332" cy="65.772" r="9.6" transform="rotate(180 63.4332 65.772)" fill="#C6D1DB"/>
<rect x="67.6992" y="91.372" width="25.6" height="12.8" fill="#C6D1DB"/>
<circle cx="96.901" cy="65.772" r="9.6" transform="rotate(180 96.901 65.772)" fill="#C6D1DB"/>
<path d="M91.9757 20.9362C106.991 23.7299 120.415 32.0456 129.603 44.2448C138.792 56.4441 143.079 71.6423 141.619 86.845C140.159 102.048 133.058 116.152 121.716 126.38C110.374 136.608 95.6124 142.217 80.3402 142.102C65.068 141.987 50.3926 136.157 39.2053 125.76C28.0181 115.363 21.1303 101.153 19.8991 85.9302C18.6678 70.7073 23.1824 55.5752 32.5533 43.5154C41.9243 31.4557 55.472 23.3427 70.5272 20.775L72.5816 32.8209C60.5375 34.8751 49.6993 41.3654 42.2026 51.0133C34.7058 60.6611 31.0941 72.7667 32.0791 84.945C33.0641 97.1234 38.5743 108.491 47.5241 116.809C56.4739 125.126 68.2143 129.791 80.432 129.882C92.6498 129.974 104.459 125.487 113.533 117.305C122.607 109.123 128.287 97.839 129.455 85.6769C130.623 73.5147 127.194 61.3562 119.843 51.5968C112.492 41.8374 101.752 35.1848 89.7404 32.9499L91.9757 20.9362Z" fill="white"/>
</svg>
`,
};

// Convert SVG strings to data URLs
const createDataURLFromSVG = (svgString) => {
  return `data:image/svg+xml,${encodeURIComponent(svgString)}`;
};

// Production-ready images object with immediate availability
export const images = {
  GoodAir: createDataURLFromSVG(iconSVGs.GoodAir),
  ModerateAir: createDataURLFromSVG(iconSVGs.ModerateAir),
  UnhealthyForSensitiveGroups: createDataURLFromSVG(
    iconSVGs.UnhealthyForSensitiveGroups,
  ),
  Unhealthy: createDataURLFromSVG(iconSVGs.Unhealthy),
  VeryUnhealthy: createDataURLFromSVG(iconSVGs.VeryUnhealthy),
  Hazardous: createDataURLFromSVG(iconSVGs.Hazardous),
  Invalid: createDataURLFromSVG(iconSVGs.Invalid),
  undefined: createDataURLFromSVG(iconSVGs.undefined),
};

// Async function to get images (for backward compatibility)
export const getImages = async () => {
  return images;
};

// Utility function to get image by category with fallback
export const getImageByCategory = (category) => {
  const image = images[category];
  if (image) {
    return image;
  }

  console.warn(`Image not found for category: ${category}, using fallback`);
  return images.Invalid;
};

// Function to preload all images (call this during app initialization)
export const preloadImages = () => {
  return Promise.all(
    Object.values(images).map((src) => {
      return new Promise((resolve, reject) => {
        const img = new Image();
        img.onload = resolve;
        img.onerror = reject;
        img.src = src;
      });
    }),
  ).catch((error) => {
    console.warn('Some images failed to preload:', error);
  });
};

// -------------------------------------------------------------------
// Marker thresholds and colors based on pollutant type
// -------------------------------------------------------------------
export const markerDetails = {
  pm2_5: [
    { limit: 500.5, category: 'Invalid' },
    { limit: 225.5, category: 'Hazardous' },
    { limit: 125.5, category: 'VeryUnhealthy' },
    { limit: 55.5, category: 'Unhealthy' },
    { limit: 35.5, category: 'UnhealthyForSensitiveGroups' },
    { limit: 9.1, category: 'ModerateAir' },
    { limit: 0.0, category: 'GoodAir' },
  ],
  pm10: [
    { limit: 604.1, category: 'Invalid' },
    { limit: 424.1, category: 'Hazardous' },
    { limit: 354.1, category: 'VeryUnhealthy' },
    { limit: 254.1, category: 'Unhealthy' },
    { limit: 154.1, category: 'UnhealthyForSensitiveGroups' },
    { limit: 54.1, category: 'ModerateAir' },
    { limit: 0.0, category: 'GoodAir' },
  ],
  no2: [
    { limit: 2049.1, category: 'Invalid' },
    { limit: 1249.1, category: 'Hazardous' },
    { limit: 649.1, category: 'VeryUnhealthy' },
    { limit: 360.1, category: 'Unhealthy' },
    { limit: 100.1, category: 'UnhealthyForSensitiveGroups' },
    { limit: 53.1, category: 'ModerateAir' },
    { limit: 0.0, category: 'GoodAir' },
  ],
  o3: [
    { limit: 604.1, category: 'Invalid' },
    { limit: 504.1, category: 'Hazardous' },
    { limit: 404.1, category: 'VeryUnhealthy' },
    { limit: 204.1, category: 'Unhealthy' },
    { limit: 154.1, category: 'UnhealthyForSensitiveGroups' },
    { limit: 54.1, category: 'ModerateAir' },
    { limit: 0.0, category: 'GoodAir' },
  ],
  co: [
    { limit: 50.5, category: 'Invalid' },
    { limit: 40.5, category: 'Hazardous' },
    { limit: 30.5, category: 'VeryUnhealthy' },
    { limit: 10.5, category: 'Unhealthy' },
    { limit: 4.5, category: 'UnhealthyForSensitiveGroups' },
    { limit: 2.5, category: 'ModerateAir' },
    { limit: 0.0, category: 'GoodAir' },
  ],
  so2: [
    { limit: 1004.1, category: 'Invalid' },
    { limit: 804.1, category: 'Hazardous' },
    { limit: 604.1, category: 'VeryUnhealthy' },
    { limit: 304.1, category: 'Unhealthy' },
    { limit: 185.1, category: 'UnhealthyForSensitiveGroups' },
    { limit: 75.1, category: 'ModerateAir' },
    { limit: 0.0, category: 'GoodAir' },
  ],
};

export const colors = {
  Invalid: '#C6D1DB',
  Hazardous: '#D95BA3',
  VeryUnhealthy: '#AC5CD9',
  Unhealthy: '#F7453C',
  UnhealthyForSensitiveGroups: '#FF851F',
  ModerateAir: '#FFD633',
  GoodAir: '#34C759',
  undefined: '#C6D1DB',
};

// Utility function to get category from pollutant value
export const getCategoryFromValue = (pollutant, value) => {
  const thresholds = markerDetails[pollutant];
  if (!thresholds || value == null) {
    return 'Invalid';
  }

  for (const threshold of thresholds) {
    if (value >= threshold.limit) {
      return threshold.category;
    }
  }

  return 'Invalid';
};

// Utility function to get color from category
export const getColorByCategory = (category) => {
  return colors[category] || colors.Invalid;
};
