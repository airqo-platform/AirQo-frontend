{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shallowEqual = exports.ITERATOR_SYMBOL = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nexports.getAdapter = getAdapter;\nexports.makeOptions = makeOptions;\nexports.isCustomComponent = isCustomComponent;\nexports.isCustomComponentElement = isCustomComponentElement;\nexports.propsOfNode = propsOfNode;\nexports.typeOfNode = typeOfNode;\nexports.nodeHasType = nodeHasType;\nexports.nodeMatches = nodeMatches;\nexports.nodeEqual = nodeEqual;\nexports.containsChildrenSubArray = containsChildrenSubArray;\nexports.childrenToSimplifiedArray = childrenToSimplifiedArray;\nexports.isReactElementAlike = isReactElementAlike;\nexports.withSetStateAllowed = withSetStateAllowed;\nexports.AND = AND;\nexports.displayNameOfNode = displayNameOfNode;\nexports.sym = sym;\nexports.privateSet = privateSet;\nexports.cloneElement = cloneElement;\nexports.spyMethod = spyMethod;\n\nvar _enzymeShallowEqual = require('enzyme-shallow-equal');\n\nObject.defineProperty(exports, 'shallowEqual', {\n  enumerable: true,\n  get: function () {\n    function get() {\n      return _interopRequireDefault(_enzymeShallowEqual)['default'];\n    }\n\n    return get;\n  }()\n});\nexports.isEmptyValue = isEmptyValue;\nexports.renderedDive = renderedDive;\nexports.loadCheerioRoot = loadCheerioRoot;\n\nvar _object = require('object.assign');\n\nvar _object2 = _interopRequireDefault(_object);\n\nvar _lodash = require('lodash.isequal');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _objectIs = require('object-is');\n\nvar _objectIs2 = _interopRequireDefault(_objectIs);\n\nvar _object3 = require('object.entries');\n\nvar _object4 = _interopRequireDefault(_object3);\n\nvar _functionPrototype = require('function.prototype.name');\n\nvar _functionPrototype2 = _interopRequireDefault(_functionPrototype);\n\nvar _has = require('has');\n\nvar _has2 = _interopRequireDefault(_has);\n\nvar _arrayPrototype = require('array.prototype.flat');\n\nvar _arrayPrototype2 = _interopRequireDefault(_arrayPrototype);\n\nvar _stringPrototype = require('string.prototype.trim');\n\nvar _stringPrototype2 = _interopRequireDefault(_stringPrototype);\n\nvar _cheerio = require('cheerio');\n\nvar _cheerio2 = _interopRequireDefault(_cheerio);\n\nvar _utils = require('cheerio/lib/utils');\n\nvar _configuration = require('./configuration');\n\nvar _RSTTraversal = require('./RSTTraversal');\n\nvar _getAdapter = require('./getAdapter');\n\nvar _getAdapter2 = _interopRequireDefault(_getAdapter);\n\nvar _validateAdapter = require('./validateAdapter');\n\nvar _validateAdapter2 = _interopRequireDefault(_validateAdapter);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n/* eslint no-use-before-define: 0 */\n\n\nvar ITERATOR_SYMBOL = exports.ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n\nfunction getAdapter() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  console.warn('getAdapter from Utils is deprecated; please use ./getAdapter instead');\n  return (0, _getAdapter2['default'])(options);\n}\n\nfunction validateMountOptions(attachTo, hydrateIn) {\n  if (attachTo && hydrateIn && attachTo !== hydrateIn) {\n    throw new TypeError('If both the `attachTo` and `hydrateIn` options are provided, they must be === (for backwards compatibility)');\n  }\n}\n\nfunction makeOptions(options) {\n  var _get = (0, _configuration.get)(),\n      configAttachTo = _get.attachTo,\n      configHydrateIn = _get.hydrateIn,\n      config = _objectWithoutProperties(_get, ['attachTo', 'hydrateIn']);\n\n  validateMountOptions(configAttachTo, configHydrateIn);\n  var attachTo = options.attachTo,\n      hydrateIn = options.hydrateIn;\n  validateMountOptions(attachTo, hydrateIn); // neither present: both undefined\n  // only attachTo present: attachTo set, hydrateIn undefined\n  // only hydrateIn present: both set to hydrateIn\n  // both present (and ===, per above): both set to hydrateIn\n\n  var finalAttachTo = hydrateIn || configHydrateIn || configAttachTo || attachTo || undefined;\n  var finalHydrateIn = hydrateIn || configHydrateIn || undefined;\n  var mountTargets = (0, _object2['default'])({}, finalAttachTo && {\n    attachTo: finalAttachTo\n  }, finalHydrateIn && {\n    hydrateIn: finalHydrateIn\n  });\n  return (0, _object2['default'])({}, config, options, mountTargets);\n}\n\nfunction isCustomComponent(component, adapter) {\n  (0, _validateAdapter2['default'])(adapter);\n\n  if (adapter.isCustomComponent) {\n    return !!adapter.isCustomComponent(component);\n  }\n\n  return typeof component === 'function';\n}\n\nfunction isCustomComponentElement(inst, adapter) {\n  if (adapter.isCustomComponentElement) {\n    return !!adapter.isCustomComponentElement(inst);\n  }\n\n  return !!inst && adapter.isValidElement(inst) && typeof inst.type === 'function';\n}\n\nfunction propsOfNode(node) {\n  return (0, _object4['default'])(node && node.props || {}).filter(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        value = _ref2[1];\n\n    return typeof value !== 'undefined';\n  }).reduce(function (acc, _ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        key = _ref4[0],\n        value = _ref4[1];\n\n    return (0, _object2['default'])(acc, _defineProperty({}, key, value));\n  }, {});\n}\n\nfunction typeOfNode(node) {\n  return node ? node.type : null;\n}\n\nfunction nodeHasType(node, type) {\n  if (!type || !node) return false;\n  var adapter = (0, _getAdapter2['default'])();\n\n  if (adapter.displayNameOfNode) {\n    var displayName = adapter.displayNameOfNode(node);\n    return displayName === type;\n  }\n\n  if (!node.type) return false;\n  if (typeof node.type === 'string') return node.type === type;\n  return (typeof node.type === 'function' ? (0, _functionPrototype2['default'])(node.type) === type : node.type.name === type) || node.type.displayName === type;\n}\n\nfunction internalChildrenCompare(a, b, lenComp, isLoose) {\n  var nodeCompare = isLoose ? nodeMatches : nodeEqual;\n  if (a === b) return true;\n\n  if (!Array.isArray(a) && !Array.isArray(b)) {\n    return nodeCompare(a, b, lenComp);\n  }\n\n  var flatA = (0, _arrayPrototype2['default'])(a, Infinity);\n  var flatB = (0, _arrayPrototype2['default'])(b, Infinity);\n  if (flatA.length !== flatB.length) return false;\n  if (flatA.length === 0 && flatB.length === 0) return true;\n\n  for (var i = 0; i < flatA.length; i += 1) {\n    if (!nodeCompare(flatA[i], flatB[i], lenComp)) return false;\n  }\n\n  return true;\n}\n\nfunction childrenMatch(a, b, lenComp) {\n  return internalChildrenCompare(a, b, lenComp, true);\n}\n\nfunction childrenEqual(a, b, lenComp) {\n  return internalChildrenCompare(a, b, lenComp, false);\n}\n\nfunction removeNullaryReducer(acc, _ref5) {\n  var _ref6 = _slicedToArray(_ref5, 2),\n      key = _ref6[0],\n      value = _ref6[1];\n\n  var addition = value == null ? {} : _defineProperty({}, key, value);\n  return (0, _object2['default'])({}, acc, addition);\n}\n\nfunction internalNodeCompare(a, b, lenComp, isLoose) {\n  if (a === b) return true;\n  if (!a || !b) return false;\n  if (a.type !== b.type) return false;\n  var left = propsOfNode(a);\n  var right = propsOfNode(b);\n\n  if (isLoose) {\n    left = (0, _object4['default'])(left).reduce(removeNullaryReducer, {});\n    right = (0, _object4['default'])(right).reduce(removeNullaryReducer, {});\n  }\n\n  var leftKeys = Object.keys(left);\n\n  for (var i = 0; i < leftKeys.length; i += 1) {\n    var prop = leftKeys[i]; // we will check children later\n\n    if (prop === 'children') {// continue;\n    } else if (!(prop in right)) {\n      return false;\n    } else if (right[prop] === left[prop]) {// continue;\n    } else if (_typeof(right[prop]) === _typeof(left[prop]) && _typeof(left[prop]) === 'object') {\n      if (!(0, _lodash2['default'])(left[prop], right[prop])) return false;\n    } else {\n      return false;\n    }\n  }\n\n  var leftHasChildren = 'children' in left;\n  var rightHasChildren = 'children' in right;\n  var childCompare = isLoose ? childrenMatch : childrenEqual;\n\n  if (leftHasChildren || rightHasChildren) {\n    if (!childCompare(childrenToSimplifiedArray(left.children, isLoose), childrenToSimplifiedArray(right.children, isLoose), lenComp)) {\n      return false;\n    }\n  }\n\n  if (!isTextualNode(a)) {\n    var rightKeys = Object.keys(right);\n    return lenComp(leftKeys.length - leftHasChildren, rightKeys.length - rightHasChildren);\n  }\n\n  return false;\n}\n\nfunction nodeMatches(a, b) {\n  var lenComp = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _objectIs2['default'];\n  return internalNodeCompare(a, b, lenComp, true);\n}\n\nfunction nodeEqual(a, b) {\n  var lenComp = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _objectIs2['default'];\n  return internalNodeCompare(a, b, lenComp, false);\n}\n\nfunction containsChildrenSubArray(match, node, subArray) {\n  var children = (0, _RSTTraversal.childrenOfNode)(node);\n\n  var checker = function checker(_, i) {\n    return arraysEqual(match, children.slice(i, i + subArray.length), subArray);\n  };\n\n  return children.some(checker);\n}\n\nfunction arraysEqual(match, left, right) {\n  return left.length === right.length && left.every(function (el, i) {\n    return match(el, right[i]);\n  });\n}\n\nfunction childrenToArray(children) {\n  var result = [];\n\n  var push = function push(el) {\n    if (el === null || el === false || typeof el === 'undefined') return;\n    result.push(el);\n  };\n\n  if (Array.isArray(children)) {\n    children.forEach(push);\n  } else {\n    push(children);\n  }\n\n  return result;\n}\n\nfunction childrenToSimplifiedArray(nodeChildren) {\n  var isLoose = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var childrenArray = childrenToArray(nodeChildren);\n  var simplifiedArray = [];\n\n  for (var i = 0; i < childrenArray.length; i += 1) {\n    var child = childrenArray[i];\n    var previousChild = simplifiedArray.pop();\n\n    if (typeof previousChild === 'undefined') {\n      simplifiedArray.push(child);\n    } else if (isTextualNode(child) && isTextualNode(previousChild)) {\n      simplifiedArray.push(previousChild + child);\n    } else {\n      simplifiedArray.push(previousChild);\n      simplifiedArray.push(child);\n    }\n  }\n\n  if (isLoose) {\n    return simplifiedArray.map(function (x) {\n      return typeof x === 'string' ? (0, _stringPrototype2['default'])(x) : x;\n    });\n  }\n\n  return simplifiedArray;\n}\n\nfunction isTextualNode(node) {\n  return typeof node === 'string' || typeof node === 'number';\n}\n\nfunction isReactElementAlike(arg, adapter) {\n  return adapter.isValidElement(arg) || isTextualNode(arg) || Array.isArray(arg);\n} // TODO(lmr): can we get rid of this outside of the adapter?\n\n\nfunction withSetStateAllowed(fn) {\n  // NOTE(lmr):\n  // this is currently here to circumvent a React bug where `setState()` is\n  // not allowed without global being defined.\n  var cleanup = false;\n\n  if (typeof global.document === 'undefined') {\n    cleanup = true;\n    global.document = {};\n  }\n\n  fn();\n\n  if (cleanup) {\n    // This works around a bug in node/jest in that developers aren't able to\n    // delete things from global when running in a node vm.\n    global.document = undefined;\n    delete global.document;\n  }\n}\n\nfunction AND(fns) {\n  var fnsReversed = fns.slice().reverse();\n  return function (x) {\n    return fnsReversed.every(function (fn) {\n      return fn(x);\n    });\n  };\n}\n\nfunction displayNameOfNode(node) {\n  if (!node) return null;\n  var type = node.type;\n  if (!type) return null;\n  return type.displayName || (typeof type === 'function' ? (0, _functionPrototype2['default'])(type) : type.name || type);\n}\n\nfunction sym(s) {\n  return typeof Symbol === 'function' ? Symbol['for']('enzyme.' + String(s)) : s;\n}\n\nfunction privateSet(obj, prop, value) {\n  Object.defineProperty(obj, prop, {\n    value: value,\n    enumerable: false,\n    writable: true\n  });\n}\n\nfunction cloneElement(adapter, el, props) {\n  return adapter.createElement(el.type, (0, _object2['default'])({}, el.props, props));\n}\n\nfunction spyMethod(instance, methodName) {\n  var getStub = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n  var lastReturnValue = void 0;\n  var originalMethod = instance[methodName];\n  var hasOwn = (0, _has2['default'])(instance, methodName);\n  var descriptor = void 0;\n\n  if (hasOwn) {\n    descriptor = Object.getOwnPropertyDescriptor(instance, methodName);\n  }\n\n  Object.defineProperty(instance, methodName, {\n    configurable: true,\n    enumerable: !descriptor || !!descriptor.enumerable,\n    value: getStub(originalMethod) || function () {\n      function spied() {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        var result = originalMethod.apply(this, args);\n        lastReturnValue = result;\n        return result;\n      }\n\n      return spied;\n    }()\n  });\n  return {\n    restore: function () {\n      function restore() {\n        if (hasOwn) {\n          if (descriptor) {\n            Object.defineProperty(instance, methodName, descriptor);\n          } else {\n            /* eslint-disable no-param-reassign */\n            instance[methodName] = originalMethod;\n            /* eslint-enable no-param-reassign */\n          }\n        } else {\n          /* eslint-disable no-param-reassign */\n          delete instance[methodName];\n          /* eslint-enable no-param-reassign */\n        }\n      }\n\n      return restore;\n    }(),\n    getLastReturnValue: function () {\n      function getLastReturnValue() {\n        return lastReturnValue;\n      }\n\n      return getLastReturnValue;\n    }()\n  };\n}\n\nfunction isEmptyValue(renderedValue) {\n  return renderedValue === null || renderedValue === false;\n}\n\nfunction renderedDive(nodes) {\n  if (isEmptyValue(nodes)) {\n    return true;\n  }\n\n  return [].concat(nodes).every(function (n) {\n    if (n) {\n      var rendered = n.rendered;\n      return isEmptyValue(rendered) || renderedDive(rendered);\n    }\n\n    return isEmptyValue(n);\n  });\n}\n\nfunction loadCheerioRoot(html) {\n  if (!html) {\n    return _cheerio2['default'].root();\n  }\n\n  if (!(0, _utils.isHtml)(html)) {\n    // use isDocument=false to create fragment\n    return _cheerio2['default'].load(html, null, false).root();\n  }\n\n  return _cheerio2['default'].load('')(html);\n} //# sourceMappingURL=Utils.js.map","map":{"version":3,"sources":["../src/Utils.js"],"names":["ITERATOR_SYMBOL","Symbol","getAdapter","options","console","attachTo","makeOptions","configAttachTo","configHydrateIn","config","validateMountOptions","hydrateIn","finalAttachTo","finalHydrateIn","mountTargets","isCustomComponent","adapter","isCustomComponentElement","inst","propsOfNode","node","value","key","typeOfNode","nodeHasType","displayName","nodeCompare","isLoose","a","Array","flatA","flatB","i","internalChildrenCompare","addition","b","left","right","leftKeys","Object","prop","leftHasChildren","rightHasChildren","childCompare","childrenToSimplifiedArray","isTextualNode","rightKeys","lenComp","nodeMatches","is","internalNodeCompare","nodeEqual","containsChildrenSubArray","children","checker","arraysEqual","subArray","match","result","push","el","childrenArray","childrenToArray","simplifiedArray","child","previousChild","isReactElementAlike","withSetStateAllowed","cleanup","global","fn","AND","fnsReversed","fns","displayNameOfNode","type","sym","privateSet","enumerable","writable","cloneElement","spyMethod","getStub","lastReturnValue","originalMethod","instance","hasOwn","descriptor","configurable","args","restore","getLastReturnValue","isEmptyValue","renderedValue","renderedDive","rendered","n","loadCheerioRoot","cheerio"],"mappings":"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","sourcesContent":["/* eslint no-use-before-define: 0 */\nimport isEqual from 'lodash.isequal';\nimport is from 'object-is';\nimport entries from 'object.entries';\nimport functionName from 'function.prototype.name';\nimport has from 'has';\nimport flat from 'array.prototype.flat';\nimport trim from 'string.prototype.trim';\nimport cheerio from 'cheerio';\nimport { isHtml } from 'cheerio/lib/utils';\n\nimport { get } from './configuration';\nimport { childrenOfNode } from './RSTTraversal';\nimport realGetAdapter from './getAdapter';\nimport validateAdapter from './validateAdapter';\n\nexport const ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n\nexport function getAdapter(options = {}) {\n  console.warn('getAdapter from Utils is deprecated; please use ./getAdapter instead');\n  return realGetAdapter(options);\n}\n\nfunction validateMountOptions(attachTo, hydrateIn) {\n  if (attachTo && hydrateIn && attachTo !== hydrateIn) {\n    throw new TypeError('If both the `attachTo` and `hydrateIn` options are provided, they must be === (for backwards compatibility)');\n  }\n}\n\nexport function makeOptions(options) {\n  const { attachTo: configAttachTo, hydrateIn: configHydrateIn, ...config } = get();\n  validateMountOptions(configAttachTo, configHydrateIn);\n\n  const { attachTo, hydrateIn } = options;\n  validateMountOptions(attachTo, hydrateIn);\n\n  // neither present: both undefined\n  // only attachTo present: attachTo set, hydrateIn undefined\n  // only hydrateIn present: both set to hydrateIn\n  // both present (and ===, per above): both set to hydrateIn\n  const finalAttachTo = hydrateIn || configHydrateIn || configAttachTo || attachTo || undefined;\n  const finalHydrateIn = hydrateIn || configHydrateIn || undefined;\n  const mountTargets = {\n    ...(finalAttachTo && { attachTo: finalAttachTo }),\n    ...(finalHydrateIn && { hydrateIn: finalHydrateIn }),\n  };\n\n  return {\n    ...config,\n    ...options,\n    ...mountTargets,\n  };\n}\n\nexport function isCustomComponent(component, adapter) {\n  validateAdapter(adapter);\n  if (adapter.isCustomComponent) {\n    return !!adapter.isCustomComponent(component);\n  }\n  return typeof component === 'function';\n}\n\nexport function isCustomComponentElement(inst, adapter) {\n  if (adapter.isCustomComponentElement) {\n    return !!adapter.isCustomComponentElement(inst);\n  }\n  return !!inst && adapter.isValidElement(inst) && typeof inst.type === 'function';\n}\n\nexport function propsOfNode(node) {\n  return entries((node && node.props) || {})\n    .filter(([, value]) => typeof value !== 'undefined')\n    .reduce((acc, [key, value]) => Object.assign(acc, { [key]: value }), {});\n}\n\nexport function typeOfNode(node) {\n  return node ? node.type : null;\n}\n\nexport function nodeHasType(node, type) {\n  if (!type || !node) return false;\n\n  const adapter = realGetAdapter();\n  if (adapter.displayNameOfNode) {\n    const displayName = adapter.displayNameOfNode(node);\n    return displayName === type;\n  }\n\n  if (!node.type) return false;\n  if (typeof node.type === 'string') return node.type === type;\n  return (\n    typeof node.type === 'function' ? functionName(node.type) === type : node.type.name === type\n  ) || node.type.displayName === type;\n}\n\nfunction internalChildrenCompare(a, b, lenComp, isLoose) {\n  const nodeCompare = isLoose ? nodeMatches : nodeEqual;\n\n  if (a === b) return true;\n  if (!Array.isArray(a) && !Array.isArray(b)) {\n    return nodeCompare(a, b, lenComp);\n  }\n  const flatA = flat(a, Infinity);\n  const flatB = flat(b, Infinity);\n  if (flatA.length !== flatB.length) return false;\n  if (flatA.length === 0 && flatB.length === 0) return true;\n  for (let i = 0; i < flatA.length; i += 1) {\n    if (!nodeCompare(flatA[i], flatB[i], lenComp)) return false;\n  }\n  return true;\n}\n\nfunction childrenMatch(a, b, lenComp) {\n  return internalChildrenCompare(a, b, lenComp, true);\n}\n\nfunction childrenEqual(a, b, lenComp) {\n  return internalChildrenCompare(a, b, lenComp, false);\n}\n\nfunction removeNullaryReducer(acc, [key, value]) {\n  const addition = value == null ? {} : { [key]: value };\n  return { ...acc, ...addition };\n}\n\nfunction internalNodeCompare(a, b, lenComp, isLoose) {\n  if (a === b) return true;\n  if (!a || !b) return false;\n  if (a.type !== b.type) return false;\n\n  let left = propsOfNode(a);\n  let right = propsOfNode(b);\n  if (isLoose) {\n    left = entries(left).reduce(removeNullaryReducer, {});\n    right = entries(right).reduce(removeNullaryReducer, {});\n  }\n\n  const leftKeys = Object.keys(left);\n  for (let i = 0; i < leftKeys.length; i += 1) {\n    const prop = leftKeys[i];\n    // we will check children later\n    if (prop === 'children') {\n      // continue;\n    } else if (!(prop in right)) {\n      return false;\n    } else if (right[prop] === left[prop]) {\n      // continue;\n    } else if (typeof right[prop] === typeof left[prop] && typeof left[prop] === 'object') {\n      if (!isEqual(left[prop], right[prop])) return false;\n    } else {\n      return false;\n    }\n  }\n\n  const leftHasChildren = 'children' in left;\n  const rightHasChildren = 'children' in right;\n  const childCompare = isLoose ? childrenMatch : childrenEqual;\n  if (leftHasChildren || rightHasChildren) {\n    if (!childCompare(\n      childrenToSimplifiedArray(left.children, isLoose),\n      childrenToSimplifiedArray(right.children, isLoose),\n      lenComp,\n    )) {\n      return false;\n    }\n  }\n\n  if (!isTextualNode(a)) {\n    const rightKeys = Object.keys(right);\n    return lenComp(leftKeys.length - leftHasChildren, rightKeys.length - rightHasChildren);\n  }\n\n  return false;\n}\n\nexport function nodeMatches(a, b, lenComp = is) {\n  return internalNodeCompare(a, b, lenComp, true);\n}\n\nexport function nodeEqual(a, b, lenComp = is) {\n  return internalNodeCompare(a, b, lenComp, false);\n}\n\nexport function containsChildrenSubArray(match, node, subArray) {\n  const children = childrenOfNode(node);\n  const checker = (_, i) => arraysEqual(match, children.slice(i, i + subArray.length), subArray);\n  return children.some(checker);\n}\n\nfunction arraysEqual(match, left, right) {\n  return left.length === right.length && left.every((el, i) => match(el, right[i]));\n}\n\nfunction childrenToArray(children) {\n  const result = [];\n\n  const push = (el) => {\n    if (el === null || el === false || typeof el === 'undefined') return;\n    result.push(el);\n  };\n\n  if (Array.isArray(children)) {\n    children.forEach(push);\n  } else {\n    push(children);\n  }\n  return result;\n}\n\nexport function childrenToSimplifiedArray(nodeChildren, isLoose = false) {\n  const childrenArray = childrenToArray(nodeChildren);\n  const simplifiedArray = [];\n\n  for (let i = 0; i < childrenArray.length; i += 1) {\n    const child = childrenArray[i];\n    const previousChild = simplifiedArray.pop();\n\n    if (typeof previousChild === 'undefined') {\n      simplifiedArray.push(child);\n    } else if (isTextualNode(child) && isTextualNode(previousChild)) {\n      simplifiedArray.push(previousChild + child);\n    } else {\n      simplifiedArray.push(previousChild);\n      simplifiedArray.push(child);\n    }\n  }\n\n  if (isLoose) {\n    return simplifiedArray.map((x) => (typeof x === 'string' ? trim(x) : x));\n  }\n\n  return simplifiedArray;\n}\n\nfunction isTextualNode(node) {\n  return typeof node === 'string' || typeof node === 'number';\n}\n\nexport function isReactElementAlike(arg, adapter) {\n  return adapter.isValidElement(arg) || isTextualNode(arg) || Array.isArray(arg);\n}\n\n// TODO(lmr): can we get rid of this outside of the adapter?\nexport function withSetStateAllowed(fn) {\n  // NOTE(lmr):\n  // this is currently here to circumvent a React bug where `setState()` is\n  // not allowed without global being defined.\n  let cleanup = false;\n  if (typeof global.document === 'undefined') {\n    cleanup = true;\n    global.document = {};\n  }\n  fn();\n  if (cleanup) {\n    // This works around a bug in node/jest in that developers aren't able to\n    // delete things from global when running in a node vm.\n    global.document = undefined;\n    delete global.document;\n  }\n}\n\nexport function AND(fns) {\n  const fnsReversed = fns.slice().reverse();\n  return (x) => fnsReversed.every((fn) => fn(x));\n}\n\nexport function displayNameOfNode(node) {\n  if (!node) return null;\n\n  const { type } = node;\n\n  if (!type) return null;\n\n  return type.displayName || (typeof type === 'function' ? functionName(type) : type.name || type);\n}\n\nexport function sym(s) {\n  return typeof Symbol === 'function' ? Symbol.for(`enzyme.${s}`) : s;\n}\n\nexport function privateSet(obj, prop, value) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: false,\n    writable: true,\n  });\n}\n\nexport function cloneElement(adapter, el, props) {\n  return adapter.createElement(\n    el.type,\n    { ...el.props, ...props },\n  );\n}\n\nexport function spyMethod(instance, methodName, getStub = () => {}) {\n  let lastReturnValue;\n  const originalMethod = instance[methodName];\n  const hasOwn = has(instance, methodName);\n  let descriptor;\n  if (hasOwn) {\n    descriptor = Object.getOwnPropertyDescriptor(instance, methodName);\n  }\n  Object.defineProperty(instance, methodName, {\n    configurable: true,\n    enumerable: !descriptor || !!descriptor.enumerable,\n    value: getStub(originalMethod) || function spied(...args) {\n      const result = originalMethod.apply(this, args);\n      lastReturnValue = result;\n      return result;\n    },\n  });\n  return {\n    restore() {\n      if (hasOwn) {\n        if (descriptor) {\n          Object.defineProperty(instance, methodName, descriptor);\n        } else {\n          /* eslint-disable no-param-reassign */\n          instance[methodName] = originalMethod;\n          /* eslint-enable no-param-reassign */\n        }\n      } else {\n        /* eslint-disable no-param-reassign */\n        delete instance[methodName];\n        /* eslint-enable no-param-reassign */\n      }\n    },\n    getLastReturnValue() {\n      return lastReturnValue;\n    },\n  };\n}\n\nexport { default as shallowEqual } from 'enzyme-shallow-equal';\n\nexport function isEmptyValue(renderedValue) {\n  return renderedValue === null || renderedValue === false;\n}\n\nexport function renderedDive(nodes) {\n  if (isEmptyValue(nodes)) {\n    return true;\n  }\n\n  return [].concat(nodes).every((n) => {\n    if (n) {\n      const { rendered } = n;\n      return isEmptyValue(rendered) || renderedDive(rendered);\n    }\n\n    return isEmptyValue(n);\n  });\n}\n\nexport function loadCheerioRoot(html) {\n  if (!html) {\n    return cheerio.root();\n  }\n\n  if (!isHtml(html)) {\n    // use isDocument=false to create fragment\n    return cheerio.load(html, null, false).root();\n  }\n\n  return cheerio.load('')(html);\n}\n"]},"metadata":{},"sourceType":"script"}